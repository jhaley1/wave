<script>
  $(function () {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        window.console.log(message);
      }
    };

    var pusher = new Pusher('1a5bf2d16cdc6eef2287');
    var channelName = $('#wave-title').val();
    var channel = pusher.subscribe(channelName);
    channel.bind('updated', function(data) {
      //callback where i can update title/content (empty/val)
      console.log(data);
    });
    
    $(".save").on("click", function (event) {
      event.preventDefault();
      var valuesToSubmit = $(".wave").serialize();
      var thisWaveId = $("#js-wave-id").val();
      
      $.ajax({
        url: "/waves/" + thisWaveId,
        type: "PUT",
        data: valuesToSubmit
      });
    });
  });
</script>

<% var wave_id = thisWave.get('id') %>
<input type="hidden" id="js-wave-id" value="<%= wave_id %>">

<form class="wave">
  <input type="text" 
    id="wave-title"
    name="wave[title]" 
    placeholder="title"
    value="<%= thisWave.get('title') %>">
  <textarea name="wave[content]"><%= thisWave.get('content') %></textarea>
  <button class="button save">Save</button>
</form>

<button class="button back">Back</button>